# Video Edit Agents - GPU-Optimized Configuration
# For systems with CUDA/GPU support (Linux, Windows with NVIDIA GPU)

# Processing settings
processing:
  min_segment_duration: 0.5  # Minimum segment duration in seconds
  max_segment_duration: 30.0  # Maximum segment duration in seconds
  max_workers: 0  # Number of parallel workers for video processing (0 = auto-detect)

  # TTS parallelization settings (IMPORTANT for GPU)
  # Setting parallel_tts: false ensures sequential model loading on GPU
  # This prevents multiple processes from competing for GPU memory
  parallel_tts: false  # Disable parallel TTS to avoid GPU contention
  tts_workers: 1  # Single worker for TTS generation on GPU

# Filler word detection
fillers:
  mode: rule-based  # 'rule-based' or 'ml'
  words:
    - uh
    - um
    - ah
    - okay
    - ok
    - like
    - you know
    - so
    - basically
    - alright
    - right
  confidence_threshold: 0.8  # For ML mode

# Transcription settings (GPU mode)
transcription:
  backend: whisperx
  model: large-v2  # Using large model for GPU (tiny, base, small, medium, large, large-v2)
  language: auto  # Auto-detect or specify (en, es, fr, etc.)
  device: cuda  # GPU mode for NVIDIA GPUs
  compute_type: float16  # GPU precision (float16 for GPU, int8 for CPU)

# Text-to-Speech settings (GPU mode)
tts:
  backend: chatterbox  # Options: chatterbox, coqui

  # Voice mode: How to select the TTS voice
  # - "default": Use Chatterbox's default voice (no voice cloning)
  # - "auto": Auto-extract voice from first 30 seconds of video (voice cloning)
  # - "custom": Use a custom voice reference file (requires voice_reference path)
  # - "original": Skip TTS generation, use original video audio (preserves original speaker)
  voice_mode: custom  # Options: default, auto, custom, original

  # Custom voice reference file (only used when voice_mode: custom)
  voice_reference: "voices/sample_voice_yt.wav"
  # Examples:
  #   voice_reference: "voices/male_voice.wav"
  #   voice_reference: "temp_segments/voice_reference.wav"
  #   voice_reference: "/absolute/path/to/voice.wav"

  sample_rate: 24000  # Chatterbox default
  normalize: true  # Normalize audio volume
  device: cuda  # GPU mode for NVIDIA GPUs

# Video processing settings
video:
  sync_mode: retime  # 'retime' or 'stretch'
  quality: high  # high, medium, low
  codec: h264
  bitrate: 5M
  
  # Hardware acceleration settings
  # GPU acceleration enabled with increased timeouts for long videos
  gpu_acceleration: true  # Use NVENC for faster encoding
  hwaccel: auto  # Auto-detect CUDA hardware decoding

  # Audio normalization settings
  # When enabled, normalizes audio volume to broadcast standards using FFmpeg loudnorm filter
  audio_normalize: false  # Set to true to enable audio normalization
  audio_target_level: -16.0  # Target integrated loudness in LUFS (-16 is broadcast standard, -23 for streaming)
  audio_target_peak: -1.5  # Target true peak in dBTP (prevents clipping)
  audio_loudness_range: 11.0  # Target loudness range in LU (dynamic range)
  # Use cases:
  #   - Low volume videos (quiet speakers, poor recording)
  #   - Inconsistent volume across segments
  #   - Professional broadcast standards compliance
  # Note: Normalization adds processing time (~10-20% overhead)

  # Transition effects between segments
  transitions:
    enabled: false  # DISABLED: Transitions cause audio sync issues and hide precise edit points
    # Valid types: fade, dissolve, wipeleft, wiperight, wipeup, wipedown,
    #              slideleft, slideright, slideup, slidedown, none
    # Note: 'crossfade' is auto-mapped to 'fade' for compatibility
    type: fade  # Use 'fade' for smooth crossfade effect
    duration: 0.3  # Transition duration in seconds
    # For text correction workflows, simple concatenation (transitions disabled)
    # is more reliable and makes it easier to verify that edits match exactly.

# Output settings
output:
  format: mp4
  temp_dir: ./temp_segments
  keep_intermediates: true  # Keep temporary files for text correction workflow
  checkpoint: true  # Enable checkpoint/resume support

# Logging settings
logging:
  level: INFO  # DEBUG, INFO, WARNING, ERROR
  file: video_processing.log
